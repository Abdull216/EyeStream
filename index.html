<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#4f46e5">
  <title>EyeStream - Watch, Download, Enjoy</title>
  
  <!-- iOS Meta Tags -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="EyeStream">
  
  <style>
    /* ===== EYESTREAM BRANDING ===== */
    :root {
      --primary: #4f46e5;
      --primary-dark: #4338ca;
      --accent: #ec4899;
      --bg-dark: #0f0f23;
      --bg-card: #1a1a3a;
      --text-light: #f8fafc;
      --text-muted: #94a3b8;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, var(--bg-dark) 0%, #1e1e3f 100%);
      color: var(--text-light);
      line-height: 1.6;
      padding: 15px;
      min-height: 100vh;
      -webkit-tap-highlight-color: transparent;
    }
    
    .container {
      max-width: 100%;
      margin: 0 auto;
    }
    
    /* Header with Logo */
    .header {
      text-align: center;
      padding: 20px 0;
      margin-bottom: 30px;
    }
    
    .logo {
      font-size: 3rem;
      margin-bottom: 10px;
    }
    
    .brand {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      margin-bottom: 10px;
    }
    
    .logo-eyes {
      font-size: 2.5rem;
      animation: blink 3s infinite;
    }
    
    @keyframes blink {
      0%, 45%, 55%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }
    
    h1 {
      color: var(--primary);
      font-size: 2.2rem;
      margin: 0;
      text-shadow: 0 2px 10px rgba(79, 70, 229, 0.3);
    }
    
    .subtitle {
      color: var(--text-muted);
      font-size: 1rem;
    }
    
    /* Video Grid */
    .video-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
      margin: 25px 0;
    }
    
    .video-card {
      background: linear-gradient(145deg, var(--bg-card) 0%, #252550 100%);
      border-radius: 16px;
      overflow: hidden;
      border: 2px solid #2d2d5a;
      transition: all 0.3s ease;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
    }
    
    .video-card:active {
      transform: scale(0.98);
      border-color: var(--primary);
    }
    
    .video-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-bottom: 3px solid var(--primary);
    }
    
    .video-card .meta {
      padding: 20px;
    }
    
    .video-card h3 {
      margin: 0 0 15px 0;
      color: var(--text-light);
      font-size: 1.1rem;
      line-height: 1.4;
    }
    
    /* Buttons */
    .btn {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      border: none;
      padding: 16px 24px;
      border-radius: 12px;
      cursor: pointer;
      margin: 8px 0;
      font-weight: 600;
      font-size: 1rem;
      width: 100%;
      text-align: center;
      min-height: 52px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      transition: all 0.3s ease;
    }
    
    .btn:active {
      transform: scale(0.95);
      box-shadow: 0 5px 20px rgba(79, 70, 229, 0.4);
    }
    
    .btn.download {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    }
    
    .btn.accent {
      background: linear-gradient(135deg, var(--accent) 0%, #db2777 100%);
    }
    
    .btn-group {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-top: 15px;
    }
    
    /* Forms */
    input, textarea, select {
      width: 100%;
      padding: 18px;
      margin: 12px 0;
      background: #2d2d5a;
      border: 2px solid #3f3f75;
      color: white;
      border-radius: 14px;
      font-size: 16px;
      -webkit-appearance: none;
    }
    
    /* Sections */
    section {
      margin: 35px 0;
      padding: 25px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 20px;
      border: 2px solid #2d2d5a;
    }
    
    h2 {
      color: var(--primary);
      font-size: 1.7rem;
      margin-bottom: 25px;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
    }
    
    /* Status Messages */
    .status-message {
      padding: 18px;
      border-radius: 14px;
      margin: 15px 0;
      text-align: center;
      font-weight: 500;
      font-size: 1rem;
    }
    
    .success { background: rgba(16, 185, 129, 0.2); color: #10b981; border: 1px solid rgba(16, 185, 129, 0.3); }
    .error { background: rgba(239, 68, 68, 0.2); color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.3); }
    .info { background: rgba(79, 70, 229, 0.2); color: var(--primary); border: 1px solid rgba(79, 70, 229, 0.3); }
    
    /* Footer */
    footer {
      text-align: center;
      padding: 40px 20px;
      margin-top: 50px;
      border-top: 2px solid #2d2d5a;
    }
    
    .creator {
      color: var(--accent);
      font-weight: bold;
      font-size: 1.1rem;
      margin-top: 15px;
    }
    
    /* Chat */
    #chat-messages {
      height: 220px;
      overflow-y: auto;
      padding: 20px;
      background: var(--bg-card);
      border-radius: 16px;
      border: 2px solid #2d2d5a;
      margin: 20px 0;
      font-size: 0.95rem;
    }
    
    .chat-message {
      padding: 12px;
      border-bottom: 1px solid #3f3f75;
      margin-bottom: 10px;
    }
    
    /* Media Categories */
    .category-tabs {
      display: flex;
      gap: 10px;
      margin: 20px 0;
      overflow-x: auto;
      padding: 10px 0;
    }
    
    .category-btn {
      padding: 12px 20px;
      border: 2px solid var(--primary);
      border-radius: 25px;
      background: transparent;
      color: var(--text-light);
      cursor: pointer;
      white-space: nowrap;
      transition: all 0.3s ease;
    }
    
    .category-btn.active {
      background: var(--primary);
      color: white;
    }
    
    /* Responsive */
    @media (min-width: 768px) {
      .container {
        max-width: 750px;
      }
      
      .video-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .btn-group {
        flex-direction: row;
      }
      
      .btn {
        width: auto;
        min-width: 140px;
      }
      
      .category-tabs {
        justify-content: center;
      }
    }
    
    @media (min-width: 1024px) {
      .container {
        max-width: 1100px;
      }
      
      .video-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- Header with Big Eyes Logo -->
    <header class="header">
      <div class="brand">
        <span class="logo-eyes">👁️👁️</span>
        <h1>EyeStream</h1>
      </div>
      <p class="subtitle">Watch, Download, and Stream Everything</p>
    </header>

    <!-- Media Categories -->
    <div class="category-tabs">
      <button class="category-btn active" onclick="app.filterMedia('all')">🌐 All Media</button>
      <button class="category-btn" onclick="app.filterMedia('videos')">🎥 Videos</button>
      <button class="category-btn" onclick="app.filterMedia('music')">🎵 Music</button>
      <button class="category-btn" onclick="app.filterMedia('quran')">📖 Quran</button>
      <button class="category-btn" onclick="app.filterMedia('movies')">🎬 Movies</button>
    </div>

    <!-- Trending Section -->
    <section id="trending">
      <h2>🔥 <span class="logo-eyes">👁️</span> Trending Now</h2>
      <button class="btn" id="refresh-btn">🔄 Refresh Content</button>
      <div id="video-grid" class="video-grid"></div>
    </section>

    <!-- Media Injection Section -->
    <section id="media-inject">
      <h2>💉 <span class="logo-eyes">👁️</span> Inject Media</h2>
      <div class="btn-group">
        <button class="btn" onclick="app.injectYouTube()">🎥 Inject YouTube</button>
        <button class="btn accent" onclick="app.injectMovies()">🎬 Inject Movies</button>
        <button class="btn download" onclick="app.injectMusic()">🎵 Inject Music</button>
      </div>
      <div id="inject-status" class="status-message info">Ready to inject media...</div>
    </section>

    <!-- Upload Section -->
    <section id="upload">
      <h2>📤 <span class="logo-eyes">👁️</span> Upload Files</h2>
      <input type="file" id="file-input" multiple accept="video/*,audio/*,image/*">
      <button class="btn" id="upload-btn">📁 Upload Files</button>
      <div id="upload-status"></div>
      
      <h3 style="text-align: center; margin-top: 25px;">Your Media Library</h3>
      <div id="user-media" class="video-grid"></div>
    </section>

    <!-- Community Section -->
    <section id="community">
      <h2>💬 <span class="logo-eyes">👁️</span> Community</h2>
      <textarea id="blog-input" placeholder="Share your thoughts..." rows="3"></textarea>
      <button class="btn" id="post-btn">📝 Post Message</button>
      <div id="blog-posts"></div>
    </section>

    <!-- Live Chat -->
    <section id="chat">
      <h2>🔊 <span class="logo-eyes">👁️</span> Live Chat</h2>
      <div id="chat-messages"></div>
      <input type="text" id="chat-input" placeholder="Type your message...">
      <button class="btn" id="send-btn">📤 Send Message</button>
    </section>

    <footer>
      <p>© 2025 EyeStream | All Rights Reserved</p>
      <p class="creator">Created by Ticher</p>
      <p style="color: var(--text-muted); margin-top: 10px; font-size: 0.9rem;">
        👁️ Watching the world stream by 👁️
      </p>
    </footer>
  </div>

  <script>
    // ========================
    // EYESTREAM MEDIA APP
    // ========================
    class EyeStreamApp {
        constructor() {
            this.uploadedMedia = [];
            this.blogPosts = [];
            this.currentCategory = 'all';
            this.injectedMedia = [];
            this.init();
        }

        init() {
            console.log("👁️ EyeStream Initializing...");
            this.setupEventListeners();
            this.loadTrendingContent();
            this.loadUserMedia();
            this.loadBlogPosts();
            this.injectSampleMedia();
        }

        setupEventListeners() {
            document.getElementById('refresh-btn').addEventListener('click', () => {
                this.showStatus("🔄 Refreshing content...", "info");
                this.loadTrendingContent();
            });

            document.getElementById('upload-btn').addEventListener('click', () => {
                this.handleFileUpload();
            });

            document.getElementById('post-btn').addEventListener('click', () => {
                this.createBlogPost();
            });

            document.getElementById('send-btn').addEventListener('click', () => {
                this.sendChatMessage();
            });

            document.getElementById('chat-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') this.sendChatMessage();
            });
        }

        async loadTrendingContent() {
            const grid = document.getElementById('video-grid');
            grid.innerHTML = '<div class="status-message info">👁️ Loading content...</div>';

            try {
                // Simulated API call with injected media
                setTimeout(() => {
                    this.displayContent(this.injectedMedia.slice(0, 6));
                    this.showStatus("✅ Content loaded successfully", "success");
                }, 1000);
            } catch (error) {
                this.displayContent(this.injectedMedia.slice(0, 4));
            }
        }

        // ========================
        // MEDIA INJECTION SYSTEM
        // ========================
        injectSampleMedia() {
            this.injectedMedia = [
                {
                    id: 'yt_music1',
                    title: '🎵 Top Trending Music Video',
                    thumbnail: 'https://i.ytimg.com/vi/KQ6zr6kCPj8/mqdefault.jpg',
                    type: 'music',
                    source: 'youtube',
                    views: '2.4M'
                },
                {
                    id: 'movie_action1',
                    title: '🎬 Action Movie Trailer 2024',
                    thumbnail: 'https://i.ytimg.com/vi/YPY7d-0QN5c/mqdefault.jpg',
                    type: 'movies',
                    source: 'hollywood',
                    views: '5.1M'
                },
                {
                    id: 'quran_recitation1',
                    title: '📖 Beautiful Quran Recitation',
                    thumbnail: 'https://i.ytimg.com/vi/rsXadJ4oXbA/mqdefault.jpg',
                    type: 'quran',
                    source: 'islamic',
                    views: '1.8M'
                },
                {
                    id: 'yt_trend1',
                    title: '🔥 Viral Video of the Week',
                    thumbnail: 'https://i.ytimg.com/vi/jNQXAC9IVRw/mqdefault.jpg',
                    type: 'videos',
                    source: 'youtube',
                    views: '8.3M'
                }
            ];
        }

        injectYouTube() {
            const newVideos = [
                {
                    id: 'yt_new1',
                    title: '🎥 YouTube Trending #1',
                    thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/mqdefault.jpg',
                    type: 'videos',
                    source: 'youtube',
                    views: '3.2M'
                },
                {
                    id: 'yt_music2',
                    title: '🎵 Latest Music Release',
                    thumbnail: 'https://i.ytimg.com/vi/5NPBIwQyPWE/mqdefault.jpg',
                    type: 'music',
                    source: 'youtube',
                    views: '1.7M'
                }
            ];
            
            this.injectedMedia = [...newVideos, ...this.injectedMedia];
            this.showStatus("✅ YouTube content injected!", "success");
            this.loadTrendingContent();
        }

        injectMovies() {
            const newMovies = [
                {
                    id: 'movie_new1',
                    title: '🎬 Blockbuster Movie 2024',
                    thumbnail: 'https://i.ytimg.com/vi/YPY7d-0QN5c/mqdefault.jpg',
                    type: 'movies',
                    source: 'hollywood',
                    views: '4.5M'
                },
                {
                    id: 'movie_new2',
                    title: '🎭 Drama Film Premiere',
                    thumbnail: 'https://i.ytimg.com/vi/7S_tz1z_5bA/mqdefault.jpg',
                    type: 'movies',
                    source: 'cinema',
                    views: '2.1M'
                }
            ];
            
            this.injectedMedia = [...newMovies, ...this.injectedMedia];
            this.showStatus("✅ Movies injected!", "success");
            this.loadTrendingContent();
        }

        injectMusic() {
            const newMusic = [
                {
                    id: 'music_new1',
                    title: '🎤 Hot Music Video',
                    thumbnail: 'https://i.ytimg.com/vi/KQ6zr6kCPj8/mqdefault.jpg',
                    type: 'music',
                    source: 'spotify',
                    views: '6.8M'
                },
                {
                    id: 'music_new2',
                    title: '🎶 Viral Music Track',
                    thumbnail: 'https://i.ytimg.com/vi/5NPBIwQyPWE/mqdefault.jpg',
                    type: 'music',
                    source: 'tiktok',
                    views: '9.2M'
                }
            ];
            
            this.injectedMedia = [...newMusic, ...this.injectedMedia];
            this.showStatus("✅ Music injected!", "success");
            this.loadTrendingContent();
        }

        filterMedia(category) {
            this.currentCategory = category;
            document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const filtered = category === 'all' 
                ? this.injectedMedia 
                : this.injectedMedia.filter(item => item.type === category);
            
            this.displayContent(filtered);
        }

        displayContent(mediaArray) {
            const grid = document.getElementById('video-grid');
            
            if (mediaArray.length === 0) {
                grid.innerHTML = '<div class="status-message info">👁️ No media found</div>';
                return;
            }

            grid.innerHTML = mediaArray.map(item => `
                <div class="video-card">
                    <img src="${item.thumbnail}" alt="${item.title}">
                    <div class="meta">
                        <h3>${item.title}</h3>
                        <small>👁️ ${item.views} views | ${item.source}</small>
                        <div class="btn-group">
                            <button class="btn" onclick="app.watchMedia('${item.id}')">
                                ▶ Play
                            </button>
                            <button class="btn download" onclick="app.downloadMedia('${item.id}')">
                                ⬇️ Download
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        watchMedia(mediaId) {
            const media = this.injectedMedia.find(m => m.id === mediaId);
            if (media) {
                this.showStatus(`▶ Playing: ${media.title}`, "info");
                // Simulate playback
                setTimeout(() => {
                    window.open('https://www.youtube.com', '_blank');
                }, 500);
            }
        }

        downloadMedia(mediaId) {
            const media = this.injectedMedia.find(m => m.id === mediaId);
            if (media) {
                this.showStatus(`⬇️ Downloading: ${media.title}`, "info");
                setTimeout(() => {
                    window.open('https://en.y2mate.com', '_blank');
                }, 500);
            }
        }

        // ========================
        // EXISTING FUNCTIONALITY
        // ========================
        handleFileUpload() {
            const fileInput = document.getElementById('file-input');
            const files = fileInput.files;

            if (files.length === 0) {
                this.showStatus("📁 Select files first", "error");
                return;
            }

            Array.from(files).forEach(file => {
                const fileURL = URL.createObjectURL(file);
                const mediaItem = {
                    id: `user_${Date.now()}`,
                    name: file.name,
                    type: file.type.split('/')[0],
                    url: fileURL,
                    size: this.formatFileSize(file.size),
                    uploadedAt: new Date().toLocaleTimeString()
                };

                this.uploadedMedia.unshift(mediaItem);
            });

            this.saveUserMedia();
            this.displayUserMedia();
            this.showStatus(`✅ Uploaded ${files.length} file(s)`, "success");
            fileInput.value = '';
        }

        // ... (keep all the existing methods from previous version)
        // saveUserMedia, loadUserMedia, displayUserMedia, formatFileSize,
        // createBlogPost, saveBlogPosts, loadBlogPosts, displayBlogPosts,
        // sendChatMessage, showStatus, etc.

        // Existing methods continue here...
        saveUserMedia() {
            localStorage.setItem('user_media', JSON.stringify(this.uploadedMedia));
        }

        loadUserMedia() {
            const savedMedia = localStorage.getItem('user_media');
            if (savedMedia) {
                this.uploadedMedia = JSON.parse(savedMedia);
                this.displayUserMedia();
            }
        }

        displayUserMedia() {
            const container = document.getElementById('user-media');
            container.innerHTML = '';

            if (this.uploadedMedia.length === 0) {
                container.innerHTML = '<div class="status-message info">📁 No files uploaded</div>';
                return;
            }

            this.uploadedMedia.forEach(media => {
                const mediaElement = document.createElement('div');
                mediaElement.className = 'video-card';
                
                if (media.type === 'video') {
                    mediaElement.innerHTML = `
                        <video controls style="width: 100%; height: 180px; background: #000;">
                            <source src="${media.url}">
                        </video>
                        <div class="meta">
                            <h4>${media.name}</h4>
                            <small>📦 ${media.size}</small>
                            <button class="btn download" onclick="app.downloadFile('${media.url}', '${media.name}')">
                                ⬇️ Download
                            </button>
                        </div>
                    `;
                } else {
                    mediaElement.innerHTML = `
                        <div style="padding: 25px; text-align: center;">
                            <h4>${media.name}</h4>
                            <small>📦 ${media.size}</small>
                            <button class="btn download" onclick="app.downloadFile('${media.url}', '${media.name}')">
                                ⬇️ Download
                            </button>
                        </div>
                    `;
                }

                container.appendChild(mediaElement);
            });
        }

        formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' Bytes';
            if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';
            return (bytes / 1048576).toFixed(1) + ' MB';
        }

        downloadFile(url, filename) {
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            this.showStatus("✅ Download started", "success");
        }

        createBlogPost() {
            const content = document.getElementById('blog-input').value.trim();
            if (!content) {
                this.showStatus("💬 Write something first", "error");
                return;
            }

            const blogPost = {
                id: Date.now(),
                content: content,
                author: 'You',
                time: new Date().toLocaleTimeString(),
                likes: 0
            };

            this.blogPosts.unshift(blogPost);
            this.saveBlogPosts();
            this.displayBlogPosts();
            document.getElementById('blog-input').value = '';
            this.showStatus("✅ Posted!", "success");
        }

        saveBlogPosts() {
            localStorage.setItem('blog_posts', JSON.stringify(this.blogPosts));
        }

        loadBlogPosts() {
            const savedPosts = localStorage.getItem('blog_posts');
            if (savedPosts) {
                this.blogPosts = JSON.parse(savedPosts);
                this.displayBlogPosts();
            }
        }

        displayBlogPosts() {
            const container = document.getElementById('blog-posts');
            container.innerHTML = '';

            this.blogPosts.forEach(post => {
                const postElement = document.createElement('div');
                postElement.className = 'video-card';
                postElement.innerHTML = `
                    <div class="meta">
                        <p><strong>${post.author}</strong> <small>${post.time}</small></p>
                        <p>${post.content}</p>
                    </div>
                `;
                container.appendChild(postElement);
            });
        }

        sendChatMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (!message) {
                this.showStatus("💬 Type a message", "error");
                return;
            }

            const chatContainer = document.getElementById('chat-messages');
            const messageElement = document.createElement('div');
            messageElement.className = 'chat-message';
            messageElement.innerHTML = `<strong>You:</strong> ${message} <small>${new Date().toLocaleTimeString()}</small>`;
            chatContainer.appendChild(messageElement);
            
            chatContainer.scrollTop = chatContainer.scrollHeight;
            input.value = '';
        }

        showStatus(message, type) {
            const statusElement = document.getElementById('upload-status') || document.getElementById('inject-status');
            if (statusElement) {
                statusElement.innerHTML = `<div class="status-message ${type}">${message}</div>`;
                setTimeout(() => {
                    if (statusElement.innerHTML.includes(message)) {
                        statusElement.innerHTML = '';
                    }
                }, 3000);
            }
        }
    }

    // Initialize EyeStream
    window.addEventListener('DOMContentLoaded', () => {
        window.app = new EyeStreamApp();
    });
  </script>
</body>
</html>